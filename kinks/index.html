<html lang="en" class="theme-dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Talk Kink â€” Kink Survey</title>
    <link rel="preload" href="/data/kinks.json" as="fetch" crossorigin="anonymous" />
    <link rel="stylesheet" href="/assets/css/kinks/survey.css" />
    <script defer src="/assets/js/kinks/survey.js"></script>
  </head>
  <body>
    <header id="tkHeader">
      <h1>Talk Kink Survey</h1>
      <div id="themeControls">
        <button data-theme="dark">Dark</button>
        <button data-theme="lipstick">Lipstick</button>
        <button data-theme="forest">Forest</button>
      </div>
    </header>

    <!-- Left: persistent category panel (always above content) -->
    <aside id="categoryPanel" aria-label="Categories">
      <div class="panel-header">
        <h2>Categories</h2>
        <div id="selectedCountBadge" aria-live="polite">0 selected</div>
      </div>
      <div id="categoryChecklist" class="scroll"></div>
    </aside>

    <!-- Right: main content -->
    <main id="main" aria-live="polite">
      <section id="controls">
        <div class="uploader">
          <label>Load Partner A JSON <input id="loadA" type="file" accept=".json" /></label>
          <label>Load Partner B JSON <input id="loadB" type="file" accept=".json" /></label>
          <button id="downloadA">Download A</button>
          <button id="downloadB">Download B</button>
          <button id="resetAll">Reset</button>
          <button id="exportPDF">Export PDF</button>
        </div>
        <div id="ndProgress">
          <div id="progressBar"><span id="progressPct">0%</span></div>
          <div id="progressText">Question 0 of 0</div>
        </div>
      </section>

      <section id="questionArea">
        <div id="roleTabs" role="tablist" aria-label="Roles">
          <button role="tab" data-role="Giving" aria-selected="true">Giving</button>
          <button role="tab" data-role="Receiving">Receiving</button>
          <button role="tab" data-role="General">General</button>
        </div>

        <article id="questionCard">
          <div id="questionPath" class="muted"></div>
          <h3 id="questionText"></h3>
          <div id="ratingRow">
            <div class="col">
              <div class="label">Partner A</div>
              <div class="scoreRow" data-partner="A"></div>
            </div>
            <div class="col center">
              <div class="compatWrap">
                <div class="compatBar" id="compatBar"><span id="compatText">N/A</span></div>
                <div id="flagRow" aria-hidden="true"></div>
              </div>
            </div>
            <div class="col">
              <div class="label">Partner B</div>
              <div class="scoreRow" data-partner="B"></div>
            </div>
          </div>
          <div id="navRow">
            <button id="prevBtn">Back</button>
            <button id="nextBtn">Next</button>
          </div>
        </article>
      </section>
    </main>
  </body>
</html>
