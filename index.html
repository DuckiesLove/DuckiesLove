<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kink Talk</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="dark-mode">
  <!-- Banners -->
  <img id="outerWildsBanner" src="https://static.displate.com/380x270/displate/2023-10-13/48fa0ba6447050543f77cc734d746bd6_e644163f144c50f83cbef9fe6e223464.jpg" alt="Outer Wilds Banner" class="theme-banner" />
  <img id="monsterPromBanner" src="https://freeimghost.net/images/2025/06/20/yourethemaindish_banner.png" alt="Monster Prom Banner" class="theme-banner" />

  <!-- Title -->
  <h1>Kink Talk</h1>

  <!-- Theme Selector -->
  <div id="themeControl">
    <label for="themeSelector">ðŸŽ¨ Select Theme:</label>
    <select id="themeSelector">
      <option value="dark-mode">Dark</option>
      <option value="light-mode">Light</option>
      <option value="theme-blue">Blue</option>
      <option value="theme-outer-wilds">Outer Wilds</option>
      <option value="theme-monster-prom">Monster Prom</option>
      <option value="theme-rainbow">Rainbow</option>
    </select>
  </div>

  <!-- Tabs -->
  <div class="tab-container">
    <div class="tab active" id="givingTab">Giving</div>
    <div class="tab" id="receivingTab">Receiving</div>
    <div class="tab" id="neutralTab">Neutral</div>
  </div>

  <!-- Buttons -->
  <button id="downloadBtn">Download Updated Survey</button>
  <button id="newSurveyBtn">Start New Survey</button>

  <!-- Dynamic Content -->
  <div id="categoryContainer"></div>
  <div id="kinkList"></div>

  <!-- Upload Section -->
  <h3>Upload Your Survey</h3>
  <input type="file" id="fileA" />

  <h3>Upload Partner's Survey</h3>
  <input type="file" id="fileB" />

  <button id="compareBtn">Compare</button>
  <div id="comparisonResult"></div>

  <!-- JavaScript (Ensure DOM is ready before accessing elements) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const themeSelector = document.getElementById('themeSelector');
      const outerWildsBanner = document.getElementById('outerWildsBanner');
      const monsterPromBanner = document.getElementById('monsterPromBanner');

      function updateBannerVisibility(theme) {
        outerWildsBanner.style.display = theme === 'theme-outer-wilds' ? 'block' : 'none';
        monsterPromBanner.style.display = theme === 'theme-monster-prom' ? 'block' : 'none';
      }

      // Load saved theme
      const savedTheme = localStorage.getItem('selectedTheme') || 'dark-mode';
      document.body.className = savedTheme;
      themeSelector.value = savedTheme;
      updateBannerVisibility(savedTheme);

      // Handle theme change
      themeSelector.addEventListener('change', () => {
        const selectedTheme = themeSelector.value;
        document.body.className = selectedTheme;
        localStorage.setItem('selectedTheme', selectedTheme);
        updateBannerVisibility(selectedTheme);
      });

      // Optional: preload template
      document.getElementById('newSurveyBtn').addEventListener('click', () => {
        fetch('template-survey.json')
          .then(res => res.json())
          .then(data => {
            window.surveyA = data;
            // If showCategories exists:
            if (typeof showCategories === 'function') showCategories();
          })
          .catch(err => alert('Failed to load template: ' + err.message));
      });
    });
  </script>
  <script src="js/script.js"></script>
</body>
</html>
